(function(){window.isScrollInit=function(){var j,a=document.querySelector("#pullDown"),g,d=document.querySelector("#pullUp"),f,h,e=$("#wrapper"),c=$("#scroller ul");c.css("min-height",e.height());if(j!=null){j.destroy()}if(a){g=a.offsetHeight}else{g=0}if(d){f=d.offsetHeight}else{f=0}var i={mouseWheel:true,scrollbars:false,fadeScrollbars:true,probeType:1,click:true,startY:-g};window.myScrollPlug=j=new IScroll("#wrapper",i);h=j.maxScrollY=j.maxScrollY+f;var b=false;j.on("scrollStart",function(){if(this.y==this.startY){b=true}});j.on("scroll",function(){if(this.y>=5&&a&&!a.className.match("flip")){a.className="flip";a.querySelector(".pullDownLabel").innerHTML="释放刷新"}else{if(this.y<5&&a&&a.className.match("flip")){a.className="";a.querySelector(".pullDownLabel").innerHTML="下拉刷新"}else{if(this.y<=(h-f)&&d&&!d.className.match("flip")){d.className="flip";d.querySelector(".pullUpLabel").innerHTML="释放刷新";this.maxScrollY=this.maxScrollY-f}else{if(this.y>(h-f)&&d&&d.className.match("flip")){d.className="";d.querySelector(".pullUpLabel").innerHTML="加载更多";this.maxScrollY=this.maxScrollY+f}}}}});j.on("scrollEnd",function(){if(a&&!a.className.match("flip")&&this.y>this.options.startY){this.scrollTo(0,this.options.startY,800)}else{if(a&&a.className.match("flip")){a.className="loading";a.querySelector(".pullDownLabel").innerHTML="拼命加载中...";if(b){pullDownAction()}}else{if(d&&d.className.match("flip")){d.className="loading";d.querySelector(".pullUpLabel").innerHTML="拼命加载中...";if(b){pullUpAction()}}}}b=false});j.on("refresh",function(){h=this.maxScrollY=this.maxScrollY+f;a.style.opacity="1";d.style.opacity="1";if(a&&a.className.match("loading")){a.className="";a.querySelector(".pullDownLabel").innerHTML="下拉刷新";this.scrollTo(0,this.options.startY,0)}else{if(d&&d.className.match("loading")){d.className="";d.querySelector(".pullUpLabel").innerHTML="加载更多";this.scrollTo(0,this.maxScrollY,0)}}})}})();